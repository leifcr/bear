.build-details
  - if build.status
    %h3{ :class => build.status }
      VCS
    %ul.unstyled
      %li
        = render :partial => "builds/step", :locals => {:step => build.output[0], :step_no => 0}
  - build.parts.each_with_index do |part, index|
    %h3{ :class => part.status.nil? ? "" : (part.status == "status_build_part_ok" ? "status_build_ok" : "status_build_failed") }
      = part.name
    %ul{:id => "part_#{index}", :class => 'unstyled' }
      - if part.output.class == "Array"
        - part.output.each_with_index do |output, index|
          %li{:id => "step_#{index + 1}"}
            = render :partial => "builds/step", :locals => {:step => output, :step_no => index + 1}
      - if part.output.class == "String"
        %li{:id => "step_1"}
          = render :partial => "builds/step", :locals => {:step => part.output, :step_no => 1}
      - if build.status == Build::STATUS_PROGRESS
        %li{ :class => Build::STATUS_PROGRESS }
          %div.pulse
          %span.label.warning Building
